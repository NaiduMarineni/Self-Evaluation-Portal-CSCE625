<% provide(:title, "Problem "+(@thisid+1).to_s) %>
<h1><%= "Problem " + (@thisid+1).to_s + "/" + session[:problems].size.to_s %></h1>
<div class="row">
  <aside class="col-md-12">
    <section class="problem_info">

      <h1>Problem Topic: </h1>
      <div class="problemview"><%= @problem.topic.name%></div>

      <h1>Question: </h1>
      <div class = "problemview"><%= simple_format(@problem.question) %></div>
      <h1>Your Answer: </h1>
      <br>
      <%= form_for(:student) do |f| %>
        <% if (@problem.question_type.question_type!="MCQ") %>
          <%= f.text_area :answer, :value => @lastanswer %>
        <% end %>
        
        <% @option.each do |option| %>
          <%= f.label option.id, class: "checkbox inline" do %>
            <% if (!@lastanswer.nil? &&  @lastanswer.include?(option.id.to_s)) %>
              <%= check_box_tag "options[]",option.id, true %> <span><%=option.answer%></span>
            <% else %>
              <%= check_box_tag "options[]",option.id %> <span><%=option.answer%></span>
            <% end %>
            
          <% end %>
        <% end %>
        <%= f.submit "Save Your Answer", class: "btn btn-primary"%>
      <% end %>

      <div class = "buttons">
        <% if (@thisid==0) %>
          <%= link_to "Previous Problem", quiz_problem_path(:thisid => @thisid, :nextid => @thisid), class: "btn btn-primary", style: "width:20%" %>
        <% else %>
          <%= link_to "Previous Problem", quiz_problem_path(:thisid => @thisid, :nextid => @thisid - 1) , class: "btn btn-primary", style: "width:20%"  %>
        <% end %>
        <% if (@thisid==session[:problems].size-1) %>
          <%= link_to "Next Problem", quiz_problem_path(:thisid => @thisid, :nextid => @thisid), class: "btn btn-primary", style: "width:20%;float:right"  %>
        <% else %>
          <%= link_to "Next Problem", quiz_problem_path(:thisid => @thisid, :nextid => @thisid + 1), class: "btn btn-primary", style: "width:20%;float:right"  %>
        <% end %>
      </div>

      <div>
        <%= link_to "Finish Evaluation", quiz_problem_answer_path(:tillid => @thisid) , class: "btn btn-primary", style: "width:20%"  %>
      </div>

    <script type="text/javascript">
      mathjax()
    </script>

    </section>
  </aside>
</div>


